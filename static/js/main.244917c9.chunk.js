(this["webpackJsonptom-tom-map"]=this["webpackJsonptom-tom-map"]||[]).push([[0],{38:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(23),r=n.n(o),i=n(4),c=n(2),u=n(9),s=(n(38),n(39),n(0)),l=function(){var e=Object(a.useRef)(),t=Object(a.useState)({}),n=Object(i.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)(-.112869),m=Object(i.a)(l,2),d=m[0],p=m[1],f=Object(a.useState)(51.504),g=Object(i.a)(f,2),v=g[0],h=g[1],j=function(e){return{point:{latitude:e.lat,longitude:e.lng}}};return Object(a.useEffect)((function(){var t={lng:d,lat:v},n=[],a=c.map({key:"h94LEghQpIBpmvQCyzITyuEAoI5DhuII",container:e.current,stylesVisibility:{trafficIncidents:!0,trafficFlow:!0},center:[d,v],zoom:14});r(a);!function(){var e=new c.Popup({offset:{bottom:[0,-25]}}).setHTML("This is you!"),t=document.createElement("div");t.className="marker";var n=new c.Marker({draggable:!0,element:t}).setLngLat([d,v]).addTo(a);n.on("dragend",(function(){var e=n.getLngLat();p(e.lng),h(e.lat)})),n.setPopup(e).togglePopup()}();var o=function(){(function(e){var n={key:"h94LEghQpIBpmvQCyzITyuEAoI5DhuII",destinations:e.map((function(e){return j(e)})),origins:[j(t)]};return new Promise((function(t,a){u.services.matrixRouting(n).then((function(n){var a=n.matrix[0].map((function(t,n){return{location:e[n],drivingtime:t.response.routeSummary.travelTimeInSeconds}}));a.sort((function(e,t){return e.drivingtime-t.drivingtime}));var o=a.map((function(e){return e.location}));t(o)}))}))})(n).then((function(e){e.unshift(t),u.services.calculateRoute({key:"h94LEghQpIBpmvQCyzITyuEAoI5DhuII",locations:e}).then((function(e){!function(e,t){t.getLayer("route")&&(t.removeLayer("route"),t.removeSource("route")),t.addLayer({id:"route",type:"line",source:{type:"geojson",data:e},paint:{"line-color":"#4a90e2","line-width":6}})}(e.toGeoJson(),a)}))}))};return a.on("click",(function(e){n.push(e.lngLat),function(e,t){var n=document.createElement("div");n.className="marker-delivery",new c.Marker({element:n}).setLngLat(e).addTo(t)}(e.lngLat,a),o()})),function(){return a.remove()}}),[d,v]),Object(s.jsx)(s.Fragment,{children:o&&Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)("div",{ref:e,className:"map"}),Object(s.jsxs)("div",{className:"search-bar",children:[Object(s.jsx)("h1",{children:"Where to?"}),Object(s.jsx)("input",{type:"text",id:"longitude",className:"longitude",placeholder:"Put in Longitude",onChange:function(e){p(e.target.value)}}),Object(s.jsx)("input",{type:"text",id:"latitude",className:"latitude",placeholder:"Put in latitude",onChange:function(e){h(e.target.value)}})]})]})})};r.a.render(Object(s.jsx)(l,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.244917c9.chunk.js.map